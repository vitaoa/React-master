<html>
<head>
    <title> <%= templeOps.title %> </title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>

<body>
<iframe id="_SAVEASIMAGE_TEMP_FRAME" name="_SAVEASIMAGE_TEMP_FRAME" src="<%= templeOps.url %>" style="display: none;"></iframe>
</body>
<script >
    var NAME = document.getElementById('_SAVEASIMAGE_TEMP_FRAME').src.split('/');
    NAME = NAME[NAME.length-1];
//    console.log(NAME);
    function export_raw(name, data) {
        var urlObject = window.URL || window.webkitURL || window;
        var export_blob = new Blob([data], {type: "text/html;charset=utf-8"});

        var save_link = document.createElementNS("http://www.w3.org/1999/xhtml", "a")
        save_link.href = urlObject.createObjectURL(export_blob);
        save_link.download = name;
        var ev = document.createEvent("MouseEvents");
        ev.initMouseEvent(
            "click", true, false, window, 0, 0, 0, 0, 0
            , false, false, false, false, 0, null
        );
        save_link.dispatchEvent(ev);
    }
    window.onload=function () {
        setTimeout(function(){
            export_raw(NAME, document.getElementById('_SAVEASIMAGE_TEMP_FRAME').contentWindow.document.getElementsByTagName('html')[0].outerHTML);
        },3000);
    }
</script>
</html>
